<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RutIA - Tu Agente de Viajes IA Personal</title>
    <meta name="description"
        content="Planifica tu viaje perfecto en segundos con RutIA. Rutas personalizadas, tesoros ocultos y optimizaci√≥n de tiempo con Inteligencia Artificial.">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        :root {
            --primary: #6C63FF;
            --accent-gradient: linear-gradient(45deg, #FF512F, #DD2476);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-hover: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.1);
            --bg-dark: #141E30;
            --bg-darker: #0f1724;
            --text-main: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        body {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #141E30, #243B55);
            background-attachment: fixed;
            color: var(--text-main);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- LAYOUT UTILS --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section {
            padding: 80px 0;
            position: relative;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 60px;
            font-size: 1.1rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* --- HEADER / NAVBAR --- */
        .navbar {
            padding: 10px 0;
            position: absolute;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            color: var(--text-main);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #FF512F;
        }

        html {
            scroll-behavior: smooth;
        }

        /* --- HERO SECTION --- */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            background: radial-gradient(circle at 10% 20%, rgba(255, 81, 47, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(221, 36, 118, 0.1) 0%, transparent 20%);
            padding-top: 60px;
        }

        .hero-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
            text-align: center;
            max-width: 800px;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            line-height: 1.2;
            margin-bottom: 20px;
        }

        .hero-text span {
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-text p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }

        /* --- TRAVEL APP CARD (EMBEDDED) --- */
        .app-card-wrapper {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        .glow-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: var(--accent-gradient);
            filter: blur(80px);
            opacity: 0.2;
            z-index: -1;
            border-radius: 50%;
        }

        .card {
            background: rgba(20, 30, 48, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            width: 100%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        /* --- FORM ELEMENTS (Existing styles adapted) --- */
        h1.form-title {
            margin-top: 0;
            font-weight: 600;
            font-size: 1.5rem;
        }

        input,
        textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: white;
            font-family: inherit;
            box-sizing: border-box;
            transition: all 0.3s;
        }

        input:focus,
        textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-search {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(221, 36, 118, 0.4);
        }

        .btn-search:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(221, 36, 118, 0.5);
        }

        /* --- TOGGLES & BUTTONS WITHIN FORM --- */
        .route-toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .toggle-checkbox {
            display: none;
        }

        .toggle-label {
            position: relative;
            width: 100%;
            height: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 5px;
        }

        .toggle-btn {
            position: absolute;
            width: 50%;
            height: 42px;
            background: var(--accent-gradient);
            border-radius: 22px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            left: 4px;
            z-index: 1;
        }

        .toggle-text-left,
        .toggle-text-right {
            width: 50%;
            text-align: center;
            z-index: 2;
            font-weight: 600;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            transition: color 0.3s;
        }

        .toggle-checkbox:checked+.toggle-label .toggle-btn {
            left: calc(50% - 4px);
        }

        .toggle-checkbox:not(:checked)+.toggle-label .toggle-text-left,
        .toggle-checkbox:checked+.toggle-label .toggle-text-right {
            color: white;
        }

        .duration-container {
            margin-bottom: 20px;
        }

        .duration-label {
            font-size: 0.9rem;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.8);
            display: block;
        }

        .duration-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .duration-btn,
        .day-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 10px 5px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }

        .duration-btn:hover,
        .day-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .duration-btn.active {
            background: var(--accent-gradient);
            font-weight: bold;
            border-color: transparent;
        }

        .day-btn.active {
            background: linear-gradient(45deg, #11998e, #38ef7d);
            font-weight: bold;
            border-color: transparent;
        }

        /* --- STATS SECTION --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 2.5rem;
            margin: 0;
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-item p {
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* --- FEATURES SECTION --- */
        .features {
            background: rgba(0, 0, 0, 0.2);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }

        .feature-card {
            background: var(--glass);
            border: 1px solid var(--border);
            padding: 40px 30px;
            border-radius: 20px;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            background: var(--glass-hover);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 25px;
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .feature-card h3 {
            margin: 0 0 15px 0;
            font-size: 1.4rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            margin: 0;
        }

        /* --- TESTIMONIALS --- */
        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .testimonial-card {
            background: var(--bg-darker);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #333;
        }

        /* --- FAQ SECTION --- */
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            color: var(--text-secondary);
        }

        .faq-item.active .faq-answer {
            max-height: 300px;
            margin-top: 15px;
        }

        .faq-item.active i {
            transform: rotate(180deg);
        }

        /* --- FOOTER --- */
        .footer {
            background: var(--bg-darker);
            padding: 60px 0 20px 0;
            border-top: 1px solid var(--border);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 50px;
            margin-bottom: 50px;
        }

        .footer-brand h4 {
            font-size: 1.5rem;
            margin: 0 0 20px 0;
            background: var(--accent-gradient);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .footer-col h5 {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: white;
        }

        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-col li {
            margin-bottom: 10px;
        }

        .footer-col a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-col a:hover {
            color: #FF512F;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* --- SPINNER & RESULTS & ERROR --- */
        .result-box {
            display: none;
            margin-top: 25px;
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            line-height: 1.6;
            font-size: 0.95rem;
            border-left: 4px solid #FF512F;
        }

        .spinner {
            display: none;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #FF512F;
            border-radius: 50%;
            animation: spin 1s infinite linear;
            margin: 20px auto;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* RESPONSIVE */
        /* RESPONSIVE */
        @media (max-width: 900px) {
            .navbar {
                position: relative;
                /* Prevent overlap issues on mobile */
                background: var(--bg-dark);
                /* Solid background for readability */
            }

            .nav-content {
                flex-direction: column;
                gap: 15px;
            }

            .hero {
                padding-top: 20px;
                align-items: center;
                /* Center vertically on mobile if content fits, or top if long */
            }

            .hero-grid {
                grid-template-columns: 1fr;
                text-align: center;
                width: 100%;
                /* Ensure full width */
                margin: 0 auto;
                padding: 0 10px;
                /* Safety padding */
            }

            .card {
                padding: 20px;
                /* Reduced padding */
            }

            .hero-text h1 {
                font-size: 2.2rem;
                /* Smaller title */
            }

            .hero-text p {
                margin: 0 auto 30px auto;
            }

            .features-grid,
            .stats-grid,
            .testimonial-grid,
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 30px;
                text-align: center;
                /* Force center alignment */
            }

            .footer-brand,
            .footer-col,
            .footer-bottom {
                text-align: center;
                align-items: center;
                display: flex;
                flex-direction: column;
            }

            .footer-brand p {
                margin: 0 auto 20px auto;
            }
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="container nav-content">
            <div class="logo">
                <i class="fa-solid fa-wand-magic-sparkles"></i> RutIA
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero" id="how">
        <div class="container hero-grid">
            <div class="hero-text">
                <h1>Tu pr√≥ximo viaje<br><span>dise√±ado por IA</span></h1>
                <p>Olv√≠date de pasar horas planificando. Cu√©ntale a RutIA qu√© te gusta y obt√©n una ruta de Google
                    Maps paso a paso optimizada al instante. Totalmente gratis.</p>
                <div style="display: flex; gap: 20px; align-items: center; justify-content: center;">
                    <a href="https://maps.google.com" target="_blank" style="color: inherit; text-decoration: none;">
                        <i class="fa-brands fa-google"
                            style="font-size: 1.5rem; opacity: 0.6; transition: opacity 0.3s;"></i>
                    </a>
                </div>
            </div>

            <!-- EMBEDDED APPLICATION CARD -->
            <div class="app-card-wrapper">
                <div class="glow-effect"></div>
                <div class="card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h1 class="form-title" style="margin: 0;">‚úàÔ∏è Planea tu Ruta</h1>
                        <button type="button" id="clearBtn" title="Nueva B√∫squeda"
                            style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">
                            <i class="fa-solid fa-rotate-right"></i>
                        </button>
                    </div>

                    <form id="travelForm">
                        <div class="route-toggle-container" style="margin-bottom: 20px;">
                            <input type="checkbox" id="dayToggle" class="toggle-checkbox">
                            <label for="dayToggle" class="toggle-label">
                                <span class="toggle-text-left">1 D√≠a üìÖ</span>
                                <span class="toggle-btn"
                                    style="background: linear-gradient(45deg, #11998e, #38ef7d);"></span>
                                <span class="toggle-text-right">Varios D√≠as üóìÔ∏è</span>
                            </label>
                        </div>

                        <div id="dayCountContainer" class="duration-container" style="display: none;">
                            <label class="duration-label">üìÖ ¬øCu√°ntos d√≠as?</label>
                            <div class="duration-grid" style="grid-template-columns: repeat(3, 1fr);">
                                <button type="button" class="day-btn active" data-days="2">2 D√≠as</button>
                                <button type="button" class="day-btn" data-days="3">3 D√≠as</button>
                                <button type="button" class="day-btn" data-days="4">4 D√≠as</button>
                                <button type="button" class="day-btn" data-days="5">5 D√≠as</button>
                                <button type="button" class="day-btn" data-days="6">6 D√≠as</button>
                                <button type="button" class="day-btn" data-days="7">7 D√≠as</button>
                            </div>
                        </div>
                        <input type="hidden" id="daysCount" value="1">

                        <input type="text" id="location" placeholder="¬øD√≥nde necesitas ir? (Ej: Madrid, Tokio...)"
                            required>
                        <input type="text" id="exactLocation"
                            placeholder="Donde quieres que comience tu ruta (Hotel, Estaci√≥n...)">

                        <div id="globalRouteToggle" class="route-toggle-container">
                            <input type="checkbox" id="routeTypeToggle" class="toggle-checkbox">
                            <label for="routeTypeToggle" class="toggle-label">
                                <span class="toggle-text-left">Lineal üìè</span>
                                <span class="toggle-btn"></span>
                                <span class="toggle-text-right">Circular üîÑ</span>
                            </label>
                        </div>

                        <div id="dailySettings" style="display: none; margin-bottom: 20px;">
                            <!-- Generated by JS -->
                        </div>

                        <textarea id="interest"
                            placeholder="¬øQu√© te gusta? Describe todo lo que quieras ver y te apetezca hacer, ¬°la IA preparar√° tu ruta!"
                            rows="3" required></textarea>

                        <div class="duration-container">
                            <label class="duration-label">‚è±Ô∏è Tiempo disponible (por d√≠a):</label>
                            <div class="duration-grid">
                                <button type="button" class="duration-btn" data-time="60">1h</button>
                                <button type="button" class="duration-btn active" data-time="90">1.5h</button>
                                <button type="button" class="duration-btn" data-time="120">2h</button>
                                <button type="button" class="duration-btn" data-time="180">3h</button>
                            </div>
                        </div>
                        <input type="hidden" id="duration" value="90">

                        <button type="submit" class="btn btn-search" id="submitBtn">Generar Ruta M√°gica ‚ú®</button>
                    </form>

                    <div class="spinner" id="spinner"></div>
                    <div id="resultBox" class="result-box"></div>
                    <div id="errorBox"
                        style="display:none; color: #ff6b6b; margin-top: 20px; border: 1px solid rgba(255,0,0,0.3); padding: 10px; background: rgba(255,0,0,0.1); border-radius: 8px;">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- STATS SECTION -->
    <section class="section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>15k+</h3>
                    <p>Viajes Planificados</p>
                </div>
                <div class="stat-item">
                    <h3>98%</h3>
                    <p>Usuarios Satisfechos</p>
                </div>
                <div class="stat-item">
                    <h3>500+</h3>
                    <p>Ciudades Cubiertas</p>
                </div>
                <div class="stat-item">
                    <h3>0‚Ç¨</h3>
                    <p>Coste (Es gratis)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FEATURES SECTION -->
    <section class="section features" id="features">
        <div class="container">
            <h2 class="section-title">Por qu√© usar RutIA</h2>
            <p class="section-subtitle">No es solo un mapa. Es inteligencia artificial aplicada a tu felicidad
                vacacional.</p>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                    <h3>100% Personalizado</h3>
                    <p>No hay dos viajes iguales. Nuestro algoritmo se adapta a tus gustos, ya sea arte, deporte o
                        gastronom√≠a.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-clock"></i></div>
                    <h3>Horas Ahorradas</h3>
                    <p>Lo que antes te llevaba d√≠as de investigaci√≥n, ahora toma segundos. Disfruta el viaje, no la
                        planificaci√≥n.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-gem"></i></div>
                    <h3>Joyas Ocultas</h3>
                    <p>Descubre lugares que no salen en las gu√≠as tur√≠sticas tradicionales. Vive la ciudad como un
                        local.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-route"></i></div>
                    <h3>Rutas L√≥gicas</h3>
                    <p>Optimizamos el caminar. Nada de ir de punta a punta sin sentido. Todo sigue un orden geogr√°fico
                        perfecto.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-mobile-screen"></i></div>
                    <h3>Google Maps Ready</h3>
                    <p>Exporta tu ruta directamente a Google Maps con un solo clic. Navegaci√≥n GPS instant√°nea.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-robot"></i></div>
                    <h3>IA Explicativa</h3>
                    <p>No solo te decimos d√≥nde ir, sino POR QU√â. Historias y curiosidades de cada lugar generadas al
                        momento.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="section" id="testimonials">
        <div class="container">
            <h2 class="section-title">Lo que dicen los viajeros</h2>
            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="user-info">
                        <div class="avatar" style="background: #FF512F; color: white;">A</div>
                        <div>
                            <strong>Ana Garc√≠a</strong>
                            <div style="font-size: 0.8rem; color:#FFC107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                    </div>
                    <p>"Alucinante. Me organiz√≥ una ruta por Roma en 3 minutos que inclu√≠a sitios que ni mis amigos
                        italianos conoc√≠an."</p>
                </div>
                <div class="testimonial-card">
                    <div class="user-info">
                        <div class="avatar" style="background: #DD2476; color: white;">C</div>
                        <div>
                            <strong>Carlos M.</strong>
                            <div style="font-size: 0.8rem; color:#FFC107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                    </div>
                    <p>"Perfecto para viajes improvisados. Puse 'tengo 2 horas en Par√≠s' y me salv√≥ la tarde."</p>
                </div>
                <div class="testimonial-card">
                    <div class="user-info">
                        <div class="avatar" style="background: #6C63FF; color: white;">L</div>
                        <div>
                            <strong>Laura P.</strong>
                            <div style="font-size: 0.8rem; color:#FFC107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                    </div>
                    <p>"Lo mejor es que te explica la historia de los sitios. Es como llevar un gu√≠a tur√≠stico en el
                        bolsillo."</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ SECTION -->
    <section class="section features" id="faq">
        <div class="container">
            <h2 class="section-title">Preguntas Frecuentes</h2>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">¬øCu√°nto cuesta usar RutIA? <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">Es totalmente gratuito. Queremos democratizar el acceso a gu√≠as de viaje
                        personalizados de alta calidad.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">¬øFunciona en cualquier ciudad? <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">S√≠, nuestra IA tiene conocimiento global. Desde grandes capitales hasta
                        pueblos peque√±os con encanto en cualquier parte del mundo.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">¬øPuedo guardar las rutas? <i class="fa-solid fa-chevron-down"></i></div>
                    <div class="faq-answer">Actualmente puedes abrir la ruta directamente en Google Maps y guardarla
                        all√≠. Estamos trabajando en perfiles de usuario para versiones posteriores.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <h4>RutIA AI</h4>
                    <p style="color: var(--text-secondary); max-width: 300px;">La forma m√°s inteligente de viajar. Rutas
                        personalizadas al instante potenciadas por inteligencia artificial generativa.</p>
                </div>
                <div class="footer-col">
                    <h5>Producto</h5>
                    <ul>
                        <li><a href="pages/product.html#features">Caracter√≠sticas</a></li>
                        <li><a href="pages/product.html#business">Para Empresas</a></li>
                        <li><a href="pages/product.html#roadmap">Roadmap</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h5>Compa√±√≠a</h5>
                    <ul>
                        <li><a href="pages/company.html#about">Sobre Nosotros</a></li>
                        <li><a href="pages/company.html#blog">Blog</a></li>
                        <li><a href="pages/company.html#contact">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h5>Legal</h5>
                    <ul>
                        <li><a href="pages/legal.html#privacy">Privacidad</a></li>
                        <li><a href="pages/legal.html#terms">T√©rminos</a></li>
                        <li><a href="pages/legal.html#cookies">Cookies</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2026 RutIA. Powered By Hermanos Vidal.
                v6.1
                <div style="font-size: 0.6rem; opacity: 0.3; margin-top: 10px;">
                    * Las rutas han sido creadas por IA y pueden contener errores. Eval√∫e siempre su ruta con otras
                    fuentes de informaci√≥n.
                </div>
            </div>
        </div>
    </footer>

    <!-- SCRIPT -->
    <script type="module">
        let routeData = [];
        let userOrigin = "";

        const form = document.getElementById('travelForm');
        const submitBtn = document.getElementById('submitBtn');
        const spinner = document.getElementById('spinner');
        const resultBox = document.getElementById('resultBox');
        const errorBox = document.getElementById('errorBox');
        const durationBtns = document.querySelectorAll('.duration-btn');
        const durationInput = document.getElementById('duration');
        const dayToggle = document.getElementById('dayToggle');
        const dayCountContainer = document.getElementById('dayCountContainer');
        const daysCountInput = document.getElementById('daysCount');
        const dayBtns = document.querySelectorAll('.day-btn');
        const clearBtn = document.getElementById('clearBtn');
        const globalRouteToggle = document.getElementById('globalRouteToggle');
        const dailySettings = document.getElementById('dailySettings');

        // --- FAQ TOGGLE LOGIC ---
        document.querySelectorAll('.faq-question').forEach(item => {
            item.addEventListener('click', () => {
                const parent = item.parentElement;
                parent.classList.toggle('active');
            });
        });

        // --- CLEAR FORM LOGIC ---
        clearBtn.addEventListener('click', () => {
            // Reset UI Inputs
            form.reset();
            document.getElementById('duration').value = "90";
            document.getElementById('daysCount').value = "1";

            // Reset Active Buttons
            durationBtns.forEach(b => b.classList.remove('active'));
            document.querySelector('.duration-btn[data-time="90"]').classList.add('active');

            dayBtns.forEach(b => b.classList.remove('active'));
            document.querySelector('.day-btn[data-days="2"]').classList.remove('active'); // Reset days

            // Reset Toggles
            if (dayToggle.checked) {
                dayToggle.click(); // Trigger change event logic
            } else {
                // Ensure correct initial state
                dayCountContainer.style.display = 'none';
                globalRouteToggle.style.display = 'flex';
                dailySettings.style.display = 'none';
                daysCountInput.value = '1';
            }

            // Clear Results
            resultBox.style.display = 'none';
            resultBox.innerHTML = '';
            errorBox.style.display = 'none';
            submitBtn.style.display = 'block';

            // Clear internal variables
            routeData = [];
            userOrigin = "";
            console.log("Contexto limpiado.");
        });

        // --- UI LOGIC ---
        function renderDailySettings(count) {
            dailySettings.innerHTML = '';
            if (count > 1) {
                document.getElementById('exactLocation').style.display = 'none'; // Hide global input
                dailySettings.style.display = 'block';

                for (let i = 1; i <= count; i++) {
                    const div = document.createElement('div');
                    div.style.marginBottom = '10px';
                    div.style.display = 'flex';
                    div.style.alignItems = 'center';
                    div.style.justifyContent = 'space-between';
                    div.style.gap = '10px';

                    div.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="color:white; font-weight:600; white-space: nowrap; font-size: 0.9rem;">D√≠a ${i}</span>
                            <div style="position: relative; width: 130px;">
                                <input type="checkbox" id="routeToggleDay${i}" class="toggle-checkbox daily-toggle">
                                <label for="routeToggleDay${i}" class="toggle-label" style="width:100%; margin:0; height: 30px;">
                                    <span class="toggle-text-left" style="font-size: 0.65rem; line-height: 30px;">Lineal</span>
                                    <span class="toggle-btn" style="width:50%;"></span>
                                    <span class="toggle-text-right" style="font-size: 0.65rem; line-height: 30px;">Circular</span>
                                </label>
                            </div>
                        </div>
                        <input type="text" id="originDay${i}" placeholder="Salida desde..." 
                            style="flex: 1; min-width: 0; padding: 0 10px; height: 30px; margin: 0; font-size: 0.85rem; border-radius: 6px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255, 255, 255, 0.05); color: white;">
                    `;
                    dailySettings.appendChild(div);
                }
            } else {
                globalRouteToggle.style.display = 'flex';
                document.getElementById('exactLocation').style.display = 'block'; // Show global input
                dailySettings.style.display = 'none';
            }
        }

        dayToggle.addEventListener('change', () => {
            if (dayToggle.checked) {
                dayCountContainer.style.display = 'block';
                // Trigger logic for multi-day
                if (daysCountInput.value === '1') {
                    daysCountInput.value = '2';
                    dayBtns.forEach(b => b.classList.remove('active'));
                    document.querySelector('.day-btn[data-days="2"]').classList.add('active');
                }
                renderDailySettings(parseInt(daysCountInput.value));
            } else {
                dayCountContainer.style.display = 'none';
                daysCountInput.value = '1';
                renderDailySettings(1);
            }
        });

        dayBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                dayBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const days = btn.getAttribute('data-days');
                daysCountInput.value = days;
                renderDailySettings(parseInt(days));
            });
        });

        durationBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                durationBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                durationInput.value = btn.getAttribute('data-time');
            });
        });

        // --- L√ìGICA PRINCIPAL (CONECTADA AL WORKER) ---
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Clear previous data explicitly
            routeData = [];
            resultBox.innerHTML = '';

            submitBtn.style.display = 'none';
            spinner.style.display = 'block';
            resultBox.style.display = 'none';
            errorBox.style.display = 'none';

            const location = document.getElementById('location').value;
            const interest = document.getElementById('interest').value;
            const exactLocation = document.getElementById('exactLocation').value;
            const duration = document.getElementById('duration').value;
            const daysCount = parseInt(document.getElementById('daysCount').value);

            // Logic for route types per day
            let routeTypesDesc = "";
            let globalIsCircular = false; // For single day compatibility

            if (daysCount > 1) {
                for (let i = 1; i <= daysCount; i++) {
                    const isCir = document.getElementById(`routeToggleDay${i}`).checked;
                    const dayOrigin = document.getElementById(`originDay${i}`).value || location;
                    routeTypesDesc += `- D√≠a ${i}: ${isCir ? "CIRCULAR (Termina en inicio)" : "LINEAL (No vuelve)"} - Salida desde: ${dayOrigin}\n`;
                }
            } else {
                globalIsCircular = document.getElementById('routeTypeToggle').checked;
                const globalOrigin = exactLocation || location;
                routeTypesDesc = `- D√≠a 1: ${globalIsCircular ? "CIRCULAR" : "LINEAL"} - Salida desde: ${globalOrigin}`;
            }

            userOrigin = exactLocation ? exactLocation : location; // Still used as fallback or main for single day

            // Construcci√≥n del Prompt
            let exampleParadas = `["${userOrigin}", "Punto A", "Punto B", "..."]`;

            const prompt = `
            ACT√öA COMO: Un gu√≠a local experto y creador de contenido viral, que sabe contar historias que enganchan a la Generaci√≥n Z.
            
            OBJETIVO: Crear la ruta tur√≠stica PERFECTA y M√ÅS "AESTHETIC" de ${daysCount} d√≠a(s) en ${location}.
            
            DATOS DEL VIAJERO:
            - Intereses: "${interest}"
            - Duraci√≥n Caminando: ${duration} minutos/d√≠a.
            - CONFIGURACI√ìN DE RUTA (Respetar estrictamente por d√≠a, incluyendo punto de salida):
            ${routeTypesDesc}
            
            REGLAS DE ORO:
            1. L√≥gica Geogr√°fica Real (optimiza el camino).
            2. Valor A√±adido (no sitios de relleno, solo los "must-see").
            3. Completitud (ajustar sitios al tiempo).
            4. MAPAS EXACTOS: En el array de "paradas", es OBLIGATORIO a√±adir ", ${location}" al final de cada nombre de sitio (Ej: "Museo del Prado, ${location}").
            
            SOBRE LA "HISTORIA" (IMPORTANTE - ESTILO GEN Z):
            - FORMATO: Frases cortas, sueltas y directas. NADA de p√°rrafos largos (mucho texto aburre).
            - ESTILO: Usa MUCHOS EMOJIS üì∏‚ú®üíÖüî•. Tono divertido, cercano y con "vibes" positivas.
            - CONTENIDO: Calidad top. Cuenta curiosidades brutales o secretos ocultos, pero de forma r√°pida.
            - LECTURA: F√°cil de escanear (skimmable). Que se lea de un vistazo.
            - EXTENSI√ìN: Contenido sustancial pero dividido en ideas r√°pidas. ¬°V√©ndele la experiencia para que quiera ir YA!

            ESTRUCTURA DE RESPUESTA (JSON PURO):
            {
                "dias": [
                    {
                        "dia": 1,
                        "titulo": "T√≠tulo con Gancho üî•",
                        "historia": "Aqu√≠ va la narrativa visual, con frases cortas... üì∏\n\nIdeas sueltas y potentes. ‚ú®\n\nDatos curiosos que te vuelan la cabeza. ü§Ø",
                        "paradas": ${exampleParadas}
                    }
                ]
            }
            IMPORTANTE: Devuelve SOLO el JSON.`;

            try {
                // LLAMADA AL WORKER LOCAL (_worker.js)
                const response = await fetch("/api/route", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ prompt: prompt }),
                    cache: "no-store"
                });

                if (!response.ok) {
                    throw new Error("Error al obtener la ruta desde el servidor.");
                }

                const data = await response.json();

                // Extraer el JSON de la respuesta de Cerebras
                const contentStr = data.choices[0].message.content;
                const content = JSON.parse(contentStr);

                routeData = content.dias || [];

                if (!routeData || routeData.length === 0) {
                    throw new Error("La IA no devolvi√≥ ninguna ruta v√°lida.");
                }

                // Renderizar Resultados
                let htmlContent = "";
                routeData.forEach((day, index) => {
                    let displayParadas = [...(day.paradas || [])];
                    if (displayParadas.length > 0 && userOrigin) {
                        const firstStop = displayParadas[0].toLowerCase().trim();
                        const originClean = userOrigin.toLowerCase().trim();
                        if (firstStop === originClean || firstStop.includes(originClean) || originClean.includes(firstStop)) {
                            displayParadas.shift();
                        }
                    }
                    const paradasStr = displayParadas.length > 0 ? displayParadas.join(" ‚ûù ") : "Ruta sugerida";

                    htmlContent += `
                        <div style="margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 20px;">
                            <h2 style="color: #FF512F;">üìÖ D√≠a ${day.dia}: ${day.titulo}</h2>
                            <p>${day.historia}</p>
                            <p style="font-size:0.8rem; opacity:0.7; margin-top:5px;"><i class="fa-solid fa-route"></i> ${paradasStr}</p>
                            <button class="btn btn-search" style="margin-top:10px; background: #4CAF50;" onclick="window.openGoogleMaps(${index})">
                                <i class="fa-solid fa-map-location-dot"></i> Ver Ruta en Google Maps
                            </button>
                        </div>
                    `;
                });

                resultBox.innerHTML = htmlContent;
                resultBox.style.display = 'block';

            } catch (error) {
                console.error(error);
                errorBox.innerText = "‚ö†Ô∏è Se ha producido un error, vuelva a intentarlo o pruebe m√°s tarde.";
                errorBox.style.display = 'block';
            } finally {
                spinner.style.display = 'none';
                submitBtn.style.display = 'block';
            }
        });

        // --- FUNCI√ìN DE MAPAS ---
        window.openGoogleMaps = function (dayIndex) {
            const dayRoute = routeData[dayIndex];
            if (!dayRoute || !dayRoute.paradas) return alert("Error al cargar la ruta.");

            let paradas = [...dayRoute.paradas];
            const daysCount = parseInt(document.getElementById('daysCount').value);

            let isCircular = false;
            if (daysCount > 1) {
                // Determine setting for this specific day
                // dayIndex is 0-based, day settings are 1-based IDs
                const toggle = document.getElementById(`routeToggleDay${dayIndex + 1}`);
                if (toggle) isCircular = toggle.checked;

                const originInput = document.getElementById(`originDay${dayIndex + 1}`);
                if (originInput && originInput.value.trim() !== "") {
                    // Use per-day origin if available
                    userOrigin = originInput.value;
                } else {
                    // Fallback to location name if empty, or keep global userOrigin if appropriate?
                    // If input is showing but empty, user might mean "center of city"
                    userOrigin = document.getElementById('location').value;
                }
            } else {
                isCircular = document.getElementById('routeTypeToggle').checked;
            }

            if (paradas.length > 0 && userOrigin) {
                const firstStop = paradas[0].toLowerCase().trim();
                const originClean = userOrigin.toLowerCase().trim();
                if (firstStop === originClean || firstStop.includes(originClean) || originClean.includes(firstStop)) {
                    paradas.shift();
                }
            }

            const originEncoded = encodeURIComponent(userOrigin);
            let destinationEncoded = "";
            let waypointsEncoded = "";

            if (isCircular) {
                destinationEncoded = originEncoded;
                waypointsEncoded = paradas.map(p => encodeURIComponent(p)).join('|');
            } else {
                const lastStop = paradas.pop();
                destinationEncoded = encodeURIComponent(lastStop);
                waypointsEncoded = paradas.map(p => encodeURIComponent(p)).join('|');
            }

            const url = `https://www.google.com/maps/dir/?api=1&origin=${originEncoded}&destination=${destinationEncoded}&waypoints=${waypointsEncoded}&travelmode=walking`;
            window.open(url, '_blank');
        }
    </script>
</body>

</html>